# 2.1.WebAPIs

# 一 概述

## 1 简介
Web APIs是Web应用程序接口,由w3c制定.有以下三类:
1. Web API接口
    包括DOM,window,event等等.

    mdn上说的是,文档对象模型(DOM)核心是由W3C进行标准化的，它将HTML和XML文档抽象成对象，并在其上定义接口以及操纵这些对象的机制，这些定义都是与编程语言无关的.个人的理解是,js引擎(比如V8)实现了w3c定义的这些接口,然后浏览器通过接口创建宿主对象(比如button?)将DOM反射到js中,在js中就可以操作这些宿主对象
2. WebAPI
    WebAPI指一组设备兼容套件和访问接口，它允许Web应用及其内容访问设备硬件（比如电池状态或设备振动器），同时也可以获取设备上的数据（比如日历或联系人等信息）
3. 事件接口

# 三 基础
## 1 Web API接口
#### 1.1 WorkerGlobalScope
它是专门用于Web Workers的特殊js运行时环境(可以简单理解为Web Workers的全局对象),它无法访问window相关的DOM API,拥有一些核心js对象如JSON,navigator等,拥有自己的event loop.我们不会直接访问它.它的属性和方法由更具体的全局范围(global scopes)继承，如DedicatedWorkerGlobalScope和SharedWorkerGlobalScope等.

常用属性和方法:
1. `self`:返回WorkerGlobalScope对象的引用.
2. `location`:返回关联的 WorkerLocation 对象
3. `close()`:关闭当前线程
4. `importScripts()`:通过url在worker中加载脚本文件
5. `XMLHttpRequest`
6. `setTimeout/setInterval以及addEventListener/postMessage`等



#### 1.2 window
window 对象表示一个包含DOM文档的窗口(可以简单理解为当前标签的全局对象)，其 document 属性指向窗口中载入的 DOM文档.

在标签浏览器（比如Firefox）中，每个标签具有自己的 window 对象（如果你在开发扩展，浏览器窗口也是一个独立的 window）。也就是说，同一个窗口的标签之间不会共享一个 window 对象。有一些方法，如 window.resizeTo 和 window.resizeBy 之类的方法会作用于整个窗口而不是 window 对象所属的那个标签。一般而言，如果无法恰当地作用于标签，则会将其作用于窗口


常用属性和方法:
1. `stop()`:停止加载
2. 弹出dialog
    1. `confirm()`:警告对话框,默认只有确认按钮
    2. `alert()`:确认对话框,有确认和取消按钮,点击确认返回true,点击取消返回false
    3. `prompt()`:提示对话框,不仅有确认和取消按钮,还有可输入的文本框

获取window的尺寸(浏览器窗口的尺寸不包括工具栏和滚动条),有三种方法可以获取:
1. 对于IE9和其他大部分browser:
    - window.innerHeight - 浏览器窗口的内部高度
    - window.innerWidth - 浏览器窗口的内部宽度
2. 对于Internet Explorer 8、7、6、5：
    - document.documentElement.clientHeight
    - document.documentElement.clientWidth
3. 其他:
    - document.body.clientHeight
    - document.body.clientWidth
4. 所以最佳实践如下

    ```javascript
    var w=window.innerWidth
    || document.documentElement.clientWidth
    || document.body.clientWidth;
    ```

常用对象有:console,crypto,document,history

##### 1.2.1 console
##### 1.2.2 crypto
此对象允许网页访问某些加密相关服务

属性和方法:
1. `getRandomValues(typedArray)`:获取符合密码学要求的安全的随机值,传入参数的类型化数组被随机值填充（在加密意义上的随机）

##### 1.2.3 document
##### 1.2.4 history

## 2 WebAPI
## 3 事件接口
### 3.1 什么是事件

#### 3.1.1 事件目标
element，document 和 window 是最常见的事件目标，但是其他对象也可以是事件目标，比如XMLHttpRequest，AudioNode，AudioContext 等等。




addEventListener()