# 12.4.PostGIS

# 一 概述

## 3 常识
### 3.1  
geometry:几何
geography:地理

### 3.2 各种规范
WKT

### 3.3 空间数据类型
polygon:多边形
LINESTRING:线

# 三 基础
## 1 函数
ST_MakePoint():根据经纬度生成几何点

geometry ST_MakeLine;根据点，多点或线几何创建线串

ST_AsText():返回没有SRID元数据的几何/地理的知名文本（WKT）表示.(Return the Well-Known Text (WKT) representation of the geometry/geography without SRID metadata)

boolean ST_Contains(geometry geomA, geometry geomB):当且仅当B的点没有位于A的外部并且B的内部至少有一个点位于A的内部时，才返回true

`geometry ST_Boundary(geometry geomA)`:返回此几何的组合边界的闭合

`geometry  ST_Centroid()`:返回几何体的几何中心

`boolean ST_IsClosed(geometry g)`:

`geometry ST_GeomFromText(text WKT)`:Return a specified ST_Geometry value from Well-Known Text representation (WKT)

`geometry ST_MakePolygon(geometry linestring)`:创建由给定外壳形成的多边形。输入几何必须是封闭的LINESTRINGS.(Creates a Polygon formed by the given shell. Input geometries must be closed LINESTRINGS.)


计算两点间的距离:
```sql
--两种方法
select   
ST_Distance(  
    ST_SetSRID(ST_MakePoint(115.97166453999147,28.716493914230423),4326)::geography,  
    ST_SetSRID(ST_MakePoint(106.00231199774656,29.719258550486572),4326)::geography  
),  
ST_Length(  
    ST_MakeLine(  
        ST_MakePoint(115.97166453999147,28.716493914230423),  
        ST_MakePoint(106.00231199774656,29.719258550486572)  
    )::geography  
)  
```

# 六 问题
1. SRID

# 七 未整理
1. 数组的两个构造:PostgreSQL ARRAY []和ARRAY（）
2. ST_GeomFromText('LINESTRING(115.97166453999147 28.716493914230423,106.00231199774656 29.719258550486572)')与  
ST_MakeLine(  
    ST_MakePoint(115.97166453999147,28.716493914230423),  
    ST_MakePoint(106.00231199774656,29.719258550486572)  
)等价  


ST_GeomFromText('LINESTRING(115.97166453999147 28.716493914230423,106.00231199774656 29.719258550486572)')与  
ST_MakeLine(  
    ST_MakePoint(115.97166453999147,28.716493914230423),  
    ST_MakePoint(106.00231199774656,29.719258550486572)  
)等价  
  
ST_GeomFromText('POINT(115.97166453999147 28.716493914230423)',4326)与  
ST_SetSRID(ST_MakePoint(115.97166453999147,28.716493914230423),4326)等价  
  
ST_SetSRID(ST_MakePoint(115.97166453999147,28.716493914230423),4326)::geography与  
Geography(ST_SetSRID(ST_MakePoint(115.97166453999147,28.716493914230423),4326))、  
ST_GeographyFromText('SRID=4326;POINT(115.97166453999147 28.716493914230423)')等价  
(::geography是postgis中的转换类型语法,把geometry转成geography)  